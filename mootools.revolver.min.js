/* Revolver.js - http://revolverjs.com */
;(function(){var h,i;h=new Class({defaults:{autoPlay:!0,onReady:function(){},onPlay:function(){},onStop:function(){},onPause:function(){},onRestart:function(){},rotationSpeed:4E3,slideClass:"slide",transition:{direction:"left",easing:"sine:in:out",onStart:function(){},onFinish:function(){},speed:500,type:"fade"}},previousSlide:null,currentSlide:null,nextSlide:null,numSlides:0,lastSlide:null,container:null,slides:[],iteration:0,intervalId:null,state:null,options:null,dimensions:null,isAnimating:null,disabled:!1,VERSION:"1.0.3",initialize:function(a,b){this.options=Object.merge(this.defaults,b);this.container=a;this.dimensions=this.container.getSize();this.container.getChildren("."+this.options.slideClass).each(function(a){this.addSlide(a)}.bind(this));this.previousSlide=this.lastSlide;this.currentSlide=0;this.nextSlide=1<this.numSlides?1:0;this.status={paused:!1,playing:!1,stopped:!0};this.isAnimating=!1;if(1>=this.numSlides)this.disabled=!0;else return this.options.onReady.bind(this)(),this.options.autoPlay&&this.play({},!0),this},addSlide:function(a){this.slides.push(new i(a));this.numSlides=this.slides.length;this.lastSlide=0===this.numSlides?null:this.numSlides-1},changeStatus:function(a){Object.each(this.status,function(b,c){this.status[c]=c===a},this);return this},transition:function(a){if(!1===this.disabled&&!1===this.isAnimating){var a=Object.merge(Object.clone(this.options.transition),a),b=this.transitions[a.type].bind(this);this.isAnimating=!0;b(a);this.previousSlide=this.currentSlide;this.currentSlide=this.nextSlide;this.nextSlide=this.currentSlide===this.lastSlide?0:this.currentSlide+1;this.iteration++;a.onStart.bind(this)()}return this},transitions:{none:function(a){this.slides[this.currentSlide].hide();this.slides[this.nextSlide].show();a.onFinish.bind(this)();this.isAnimating=!1},fade:function(a){var b=this,c=this.slides[this.currentSlide],d=this.slides[this.nextSlide],e=new Fx.Tween(c.container,{duration:a.speed,transition:a.easing}),f=new Fx.Tween(d.container,{duration:a.speed,transition:a.easing,onComplete:function(){a.onFinish.bind(b)();b.isAnimating=!1}});c.show().container.setStyle("opacity",1);e.start("opacity",0);c.hide();d.show().container.setStyle("opacity",0);f.start("opacity",1)},slide:function(a){var b=this,c=this.slides[this.currentSlide],d=this.slides[this.nextSlide],e=new Fx.Morph(c.container,{duration:a.speed,transition:a.easing,onComplete:function(){c.hide()}}),f=new Fx.Morph(d.container,{duration:a.speed,transition:a.easing,onComplete:function(){a.onFinish.bind(b)();b.isAnimating=!1}}),g={top:0,left:0};c.container.setStyles(g);d.show();"up"===a.direction?(d.container.setStyle("top",0-this.dimensions.y),f.start(g),e.start({top:this.dimensions.y,left:0})):"right"===a.direction?(d.container.setStyle("left",0-this.dimensions.x),f.start(g),e.start({top:0,left:this.dimensions.x})):"down"===a.direction?(d.container.setStyles({top:this.dimensions.y,left:0}),f.start(g),e.start({top:0-this.dimensions.y,left:0})):"left"===a.direction&&(d.container.setStyle("left",this.dimensions.x),f.start(g),e.start({top:0,left:0-this.dimensions.x}))},reveal:function(a){var b=this,c=this.slides[this.nextSlide].container,d=new Fx.Tween(c,{duration:a.speed,transition:a.easing,onComplete:function(){a.onFinish.bind(b)();b.isAnimating=!1}});c.setStyles({"z-index":this.iteration+1,width:0});d.start("width",this.dimensions.x)}},play:function(a,b){!1===this.disabled&&!this.status.playing&&(this.changeStatus("playing"),this.options.onPlay.bind(this)(),b||this.transition(a),this.intervalId=setInterval(this.transition.bind(this),parseFloat(this.options.rotationSpeed)));return this},pause:function(){!1===this.disabled&&!this.status.paused&&(this.changeStatus("paused"),this.options.onPause.bind(this)(),null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null));return this},stop:function(){!1===this.disabled&&!this.status.stopped&&(this.changeStatus("stopped"),this.options.onStop.bind(this)(),null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null));return this.reset()},reset:function(){0!==this.currentSlide&&(this.nextSlide=0);return this},restart:function(a){if(!0===this.disabled)return this;this.options.onRestart.bind(this)();return this.stop().play(a)},first:function(a){return this.goTo(0,a)},previous:function(a){return this.goTo(this.previousSlide,a)},goTo:function(a,b){if(!0===this.disabled||a===this.currentSlide)return this;this.nextSlide=a;return this.status.playing?this.pause().play(b):this.transition(b)},next:function(a){return this.goTo(this.nextSlide,a)},last:function(a){return this.goTo(this.lastSlide,a)}});window.Revolver=h;i=new Class({container:null,initialize:function(a){this.container=a;return this},show:function(){this.container.setStyles({display:"block"});return this},hide:function(){this.container.setStyles({display:"none"});return this}});Elements.implement({revolver:function(a){return this.each(function(b){return b.revolver(a)})}});Element.implement({revolver:function(a){null===this.retrieve("revolver")&&this.store("revolver",new h(this,a));return this}})})(document.id);